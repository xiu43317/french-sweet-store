import{_ as H,r as x,o as d,c as h,a as t,w as C,v as N,n as U,p as R,b as j,d as M,e as F,f as l,g as _,h as A,T as Y,s as Z,u as q,C as P,i as w,t as D,j as z,k as m,F as E,l as G,m as W}from"./index-moY6mszh.js";import{C as X}from"./CartItem-qdHkljzh.js";import{n as p}from"./axios-3Z5XKonf.js";import{S as v}from"./sweetalert2.all-V0Gwh2pB.js";import{u as J}from"./cart-ZGeNaZ3G.js";import{d as K}from"./math-9XHDQUjD.js";const O={setup(){const o="background-image:url(https://images.unsplash.com/photo-1551578657-a7e74acb0135?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8Y2hvY29sYXRlfGVufDB8MHwwfHx8MA%3D%3D);",a=x(null);return{email:a,checkEmail:()=>{/^\w+((-\w+)|(\.\w+))*@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/.test(a.value)?v.fire({icon:"info",title:"訂閱優惠碼",text:"newcustomer",showCancelButton:!0,reverseButtons:!0,confirmButtonColor:"green",cancelButtonColor:"gray",confirmButtonText:"複製",cancelButtonText:"取消"}).then(async s=>{s.isConfirmed?navigator.clipboard.writeText("newcustomer").then(()=>{v.fire({icon:"success",confirmButtonColor:"green",title:"複製成功"})}):s.isDenied&&p(!1,"取消動作")}):p(!1,"信箱格式錯誤")},bg:o}}},V=i=>(R("data-v-423ae60a"),i=i(),j(),i),Q={class:"fixed-banner-wrap mt-5"},tt={class:"container-fluid"},et={class:"row"},ot={class:"wrap w-100"},st={class:"title-box"},at=V(()=>t("h4",{class:""},"立即訂閱享8折優惠碼",-1)),nt={class:"input-group input-group-lg mt-5 mx-auto fixed-input"},lt=V(()=>t("i",{class:"bi bi-arrow-right"},null,-1)),it=[lt];function ct(i,o,a,e,u,b){return d(),h("div",Q,[t("div",tt,[t("div",et,[t("div",ot,[t("hgroup",st,[at,t("div",nt,[C(t("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>e.email=s),type:"email",class:"form-control bg-white bg-opacity-75 text-dark",placeholder:"請輸入信箱"},null,512),[[N,e.email]]),t("button",{onClick:o[1]||(o[1]=s=>e.checkEmail()),class:"btn btn-outline-light",type:"submit"},it)])]),t("div",{class:"bg-item",style:U(e.bg)},null,4)])])])])}const rt=H(O,[["render",ct],["__scopeId","data-v-423ae60a"]]),dt={setup(i){const o=x(!1),a=()=>{o.value=window.scrollY>0},e=()=>{window.scrollTo({top:0,behavior:"smooth"})};return M(()=>{window.addEventListener("scroll",a)}),F(()=>{window.removeEventListener("scroll",a)}),{scrollToTop:e,handleScroll:a,isVisible:o}}},ut={class:"fixed-bottom text-end pe-3 pb-4"},ft=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",fill:"currentColor",class:"bi bi-arrow-up-circle",viewBox:"0 0 16 16"},[t("path",{"fill-rule":"evenodd",d:"M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8m15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-7.5 3.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707z"})],-1),mt=[ft];function _t(i,o,a,e,u,b){return d(),h("div",ut,[l(Y,null,{default:_(()=>[C(t("button",{type:"button",class:"bg-transparent border-0 text-secondary fw-bold up-btn",onClick:o[0]||(o[0]=(...s)=>e.scrollToTop&&e.scrollToTop(...s)),"aria-label":"scroll to top of the page"},mt,512),[[A,e.isVisible]])]),_:1})])}const ht=H(dt,[["render",_t]]),vt="/french-sweet-store/assets/logo-removebg-jA-3Dbqv.png",gt={components:{BottomBanner:rt,CartItem:X,UpArrow:ht},setup(){const i=x(!0),o=J(),a=x(!1),e=x(!1),{getCart:u,deleteAllCart:b,deleteCart:s,updateCart:B}=o,{cart:k}=Z(o),y=q(),c=x(!1),T=()=>{y.push("/check")},f=()=>{y.push("/products")},L=()=>{v.fire({icon:"warning",title:"確定刪除整個購物車？",text:"刪除後的資料無法恢復",showCancelButton:!0,reverseButtons:!0,confirmButtonColor:"red",cancelButtonColor:"gray",confirmButtonText:"確定",cancelButtonText:"取消"}).then(async n=>{n.isConfirmed?(a.value=!0,e.value=!0,c.value=!0,await b().then(r=>{v.fire({title:"刪除成功",confirmButtonColor:"green",text:`全部${r.data.message}`,icon:"success"})}).catch(r=>{v.fire({title:"刪除失敗",text:`${r.response.data.message}`,icon:"error"})}),await u(),a.value=!1,c.value=!1,e.value=!1):n.isDenied&&p(!1,"動作取消")})},$=async n=>{v.fire({icon:"warning",title:`確定刪除${n.product.title}`,text:"刪除後的資料無法恢復",showCancelButton:!0,cancelButtonColor:"gray",confirmButtonColor:"red",cancelButtonText:"取消",confirmButtonText:"確定",reverseButtons:!0}).then(async r=>{r.isConfirmed?(e.value=!0,c.value=!0,await s(n.id).then(g=>{v.fire({title:"刪除成功",confirmButtonColor:"green",text:`${n.product.title}${g.data.message}`,icon:"success"})}).catch(g=>{v.fire({title:"刪除失敗",text:`${g.response.data.message}`,icon:"error"})}),await u(),c.value=!1,e.value=!1):r.isDenied&&p(!1,"動作取消")})},S=(n,r,g)=>{c.value=!0,B(n.id,r).then(()=>{g===!0?p(!0,`${n.product.title}已加入`):p(!0,`${n.product.title}已移除`),c.value=!1,u()}).catch(I=>{p(!1,I.response.data.message),c.value=!1})};return M(()=>{const n=document.querySelectorAll("[data-toggle]"),r=document.getElementById("navbarNav"),g=new P(r,{toggle:!1});n.forEach(I=>{I.addEventListener("click",()=>{g.toggle()})})}),{updateItem:S,isBtnDisabled:c,clearButtoonDisable:e,removeItem:i,goToProducts:f,deleteAllItems:L,deleteAllCart:b,deleteCart:s,updateCart:B,deleteItem:$,cart:k,goToCheck:T,getCart:u,isLoading:a,delFloat:K}}},pt={class:"navbar navbar-expand-lg navbar-light sticky-top bg-light"},bt={class:"container"},wt=t("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[t("span",{class:"navbar-toggler-icon"})],-1),xt=t("img",{src:vt,height:"80",alt:"羅傑之家"},null,-1),Bt={class:"nav-link order-md-1 position-relative","data-bs-toggle":"offcanvas",href:"#offcanvasExample",role:"button","aria-controls":"offcanvasExample",style:{width:"40px",height:"40px"}},yt=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",fill:"currentColor",class:"bi bi-cart4",viewBox:"0 0 16 16"},[t("path",{d:"M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 0 0 1-.5-.5M3.14 5l.5 2H5V5zM6 5v2h2V5zm3 0v2h2V5zm3 0v2h1.36l.5-2zm1.11 3H12v2h.61zM11 8H9v2h2zM8 8H6v2h2zM5 8H3.89l.5 2H5zm0 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0m9-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0"})],-1),Ct={key:0,class:"rounded-circle bg-danger position-absolute start-100 translate-middle d-flex justify-content-center align-items-center",style:{width:"20px",height:"20px",top:"5px"}},kt={class:"text-white"},Tt={class:"collapse navbar-collapse",id:"navbarNav"},It={class:"navbar-nav mx-auto h4 nav-underline text-center"},Dt={class:"nav-item"},At={class:"nav-item"},Ht={class:"nav-item"},zt={class:"nav-item"},Et={class:"nav-item"},Mt={class:"container-fluid py-5 bg-light h-100"},Vt={class:"copyright text-center fs-5",style:{color:"#89b0ae"}},Lt=t("p",null,"羅傑之家 所有圖片皆來自於網路",-1),$t={class:"offcanvas offcanvas-end",tabindex:"-1",id:"offcanvasExample","aria-labelledby":"offcanvasExampleLabel"},St=t("div",{class:"offcanvas-header bg-light"},[t("h5",{class:"offcanvas-title fs-3 mt-1",id:"offcanvasExampleLabel"}," 購物車 "),t("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1),Nt={class:"offcanvas-body"},Ut={class:"mb-2 d-flex justify-content-end"},Rt=["disabled"],jt=t("hr",null,null,-1),Ft={key:0,class:"text-center my-5"},Yt=t("p",{class:"fs-4 fw-bold"},"你的購物車裡沒東西喔！",-1),Zt={key:1,class:"h4 text-success"},qt={key:2,class:"h4"},Pt={class:"check mt-3"},Gt=["disabled"];function Wt(i,o,a,e,u,b){const s=w("router-link"),B=w("RouterView"),k=w("BottomBanner"),y=w("font-awesome-icon"),c=w("CartItem"),T=w("UpArrow");return d(),h(E,null,[t("nav",pt,[t("div",bt,[wt,l(s,{to:"/introduction",class:"navbar-brand"},{default:_(()=>[xt]),_:1}),t("a",Bt,[yt,e.cart.carts.length?C((d(),h("div",Ct,[t("span",kt,D(e.cart.carts.length),1)],512)),[[A,e.cart.carts.length]]):z("",!0)]),t("div",Tt,[t("ul",It,[t("li",Dt,[l(s,{to:"/aboutus",class:"nav-link","data-toggle":""},{default:_(()=>[m("關於我們")]),_:1})]),t("li",At,[l(s,{to:"/news",class:"nav-link","data-toggle":""},{default:_(()=>[m("最新消息")]),_:1})]),t("li",Ht,[l(s,{to:"/products",class:"nav-link","data-toggle":""},{default:_(()=>[m("產品一覽")]),_:1})]),t("li",zt,[l(s,{to:"/notice",class:"nav-link","data-toggle":""},{default:_(()=>[m("購買須知")]),_:1})]),t("li",Et,[l(s,{to:"/orders",class:"nav-link","data-toggle":""},{default:_(()=>[m("訂單查詢")]),_:1})])])])])]),l(B),l(k),t("div",Mt,[t("div",Vt,[Lt,t("p",null,[m("Copyright © 2024 "),l(s,{to:"/admin",class:"link-success"},{default:_(()=>[m("進入後台")]),_:1})])])]),t("div",$t,[St,t("div",Nt,[t("div",Ut,[t("button",{type:"button",class:"btn btn-outline-success",onClick:o[0]||(o[0]=(...f)=>e.deleteAllItems&&e.deleteAllItems(...f)),disabled:e.clearButtoonDisable||!e.cart.total},[C(l(y,{icon:"spinner",class:"fa-spin"},null,512),[[A,e.isLoading]]),m(" 清空購物車 ")],8,Rt)]),jt,e.cart.total===0?(d(),h("div",Ft,[Yt,t("button",{type:"button","data-bs-dismiss":"offcanvas",class:"btn btn-lg btn-success",onClick:o[1]||(o[1]=f=>e.goToProducts())},"繼續選購")])):z("",!0),(d(!0),h(E,null,G(e.cart.carts,f=>(d(),W(c,{key:f.id,cart:f,isRemovable:e.removeItem,isBtnDisabled:e.isBtnDisabled,onUpdateItem:e.updateItem,onDeleteItem:e.deleteItem},null,8,["cart","isRemovable","isBtnDisabled","onUpdateItem","onDeleteItem"]))),128)),e.cart.final_total!==e.cart.total?(d(),h("p",Zt,"折扣價：NT$ "+D(e.delFloat(e.cart.final_total)),1)):(d(),h("p",qt,"總計：NT$ "+D(e.cart.total),1)),t("div",Pt,[t("button",{type:"button",class:"btn btn-secondary w-100 fs-4","data-bs-dismiss":"offcanvas",onClick:o[2]||(o[2]=f=>e.goToCheck()),disabled:e.clearButtoonDisable||!e.cart.total},"前往結帳",8,Gt)])])]),l(T)],64)}const ee=H(gt,[["render",Wt]]);export{ee as default};
