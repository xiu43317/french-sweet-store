import{_ as A,r as w,o as d,c as v,a as t,w as C,v as N,n as U,p as j,b as F,d as E,e as R,f as n,g as h,h as D,T as Y,s as Z,u as q,C as P,i as p,t as I,j as H,k as _,F as z,l as G,m as W}from"./index-7pBR4ziE.js";import{_ as X}from"./CartItem-x1TJMJvE.js";import{n as x}from"./axios-Dh73-l90.js";import{S as b}from"./sweetalert2.all-BrCdV07K.js";import{u as J}from"./cart-jHnGYyxG.js";import{d as K}from"./math-9XHDQUjD.js";const O={setup(){const o="background-image:url(https://images.unsplash.com/photo-1551578657-a7e74acb0135?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8Y2hvY29sYXRlfGVufDB8MHwwfHx8MA%3D%3D);",a=w(null);return{email:a,checkEmail:()=>{/^\w+((-\w+)|(\.\w+))*@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/.test(a.value)?b.fire({icon:"info",title:"訂閱優惠碼",text:"newcustomer",showCancelButton:!0,reverseButtons:!0,confirmButtonColor:"green",cancelButtonColor:"gray",confirmButtonText:"複製",cancelButtonText:"取消"}).then(async s=>{s.isConfirmed?navigator.clipboard.writeText("newcustomer").then(()=>{b.fire({icon:"success",title:"複製成功"})}):s.isDenied&&x(!1,"取消動作")}):x(!1,"信箱格式錯誤")},bg:o}}},M=l=>(j("data-v-acab0fe1"),l=l(),F(),l),Q={class:"fixed-banner-wrap mt-5"},tt={class:"container-fluid"},et={class:"row"},ot={class:"wrap w-100"},st={class:"title-box"},at=M(()=>t("h4",{class:""},"立即訂閱享8折優惠碼",-1)),nt={class:"input-group input-group-lg mt-5 mx-auto fixed-input"},lt=M(()=>t("i",{class:"bi bi-arrow-right"},null,-1)),it=[lt];function ct(l,o,a,e,u,g){return d(),v("div",Q,[t("div",tt,[t("div",et,[t("div",ot,[t("hgroup",st,[at,t("div",nt,[C(t("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>e.email=s),type:"email",class:"form-control bg-white bg-opacity-75 text-dark",placeholder:"請輸入信箱"},null,512),[[N,e.email]]),t("button",{onClick:o[1]||(o[1]=s=>e.checkEmail()),class:"btn btn-outline-light",type:"submit"},it)])]),t("div",{class:"bg-item",style:U(e.bg)},null,4)])])])])}const rt=A(O,[["render",ct],["__scopeId","data-v-acab0fe1"]]),dt={setup(l){const o=w(!1),a=()=>{o.value=window.scrollY>0},e=()=>{window.scrollTo({top:0,behavior:"smooth"})};return E(()=>{window.addEventListener("scroll",a)}),R(()=>{window.removeEventListener("scroll",a)}),{scrollToTop:e,handleScroll:a,isVisible:o}}},ut={class:"fixed-bottom text-end pe-3 pb-4"},ft=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",fill:"currentColor",class:"bi bi-arrow-up-circle",viewBox:"0 0 16 16"},[t("path",{"fill-rule":"evenodd",d:"M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8m15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-7.5 3.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707z"})],-1),mt=[ft];function _t(l,o,a,e,u,g){return d(),v("div",ut,[n(Y,null,{default:h(()=>[C(t("button",{class:"bg-transparent border-0 text-secondary fw-bold up-btn",onClick:o[0]||(o[0]=(...s)=>e.scrollToTop&&e.scrollToTop(...s)),"aria-label":"scroll to top of the page"},mt,512),[[D,e.isVisible]])]),_:1})])}const ht=A(dt,[["render",_t]]),vt="/french-sweet-store/assets/logo-removebg-jA-3Dbqv.png",bt={components:{BottomBanner:rt,CartItem:X,UpArrow:ht},setup(){const l=w(!0),o=J(),a=w(!1),e=w(!1),{getCart:u,deleteAllCart:g,deleteCart:s,updateCart:y}=o,{cart:k}=Z(o),B=q(),f=w(!1),T=()=>{B.push("/check")},m=()=>{B.push("/products")},L=()=>{b.fire({icon:"warning",title:"確定刪除整個購物車？",text:"刪除後的資料無法恢復",showCancelButton:!0,reverseButtons:!0,confirmButtonColor:"red",cancelButtonColor:"gray",confirmButtonText:"確定",cancelButtonText:"取消"}).then(async i=>{i.isConfirmed?(await g().then(c=>{b.fire({title:"刪除成功",text:`全部${c.data.message}`,icon:"success"})}).catch(c=>{b.fire({title:"刪除失敗",text:`${c.response.data.message}`,icon:"error"})}),a.value=!0,e.value=!0,await u(),a.value=!1,e.value=!1):i.isDenied&&x(!1,"動作取消")})},S=async i=>{b.fire({icon:"warning",title:`確定刪除${i.product.title}`,text:"刪除後的資料無法恢復",showCancelButton:!0,cancelButtonColor:"gray",confirmButtonColor:"red",cancelButtonText:"取消",confirmButtonText:"確定",reverseButtons:!0}).then(async c=>{c.isConfirmed?(e.value=!0,f.value=!0,await s(i.id).then(r=>{b.fire({title:"刪除成功",text:`${i.product.title}${r.data.message}`,icon:"success"})}).catch(r=>{b.fire({title:"刪除失敗",text:`${r.response.data.message}`,icon:"error"})}),await u(),f.value=!1,e.value=!1):c.isDenied&&x(!1,"動作取消")})},V=(i,c)=>{f.value=!0,y(i,c).then(r=>{x(!0,r.data.message),f.value=!1,u()}).catch(r=>{x(!1,r.response.data.message),f.value=!1})};return E(()=>{const i=document.querySelectorAll("[data-toggle]"),c=document.getElementById("navbarNav"),r=new P(c,{toggle:!1});i.forEach($=>{$.addEventListener("click",()=>{r.toggle()})})}),{updateItem:V,isBtnDisabled:f,clearButtoonDisable:e,removeItem:l,goToProducts:m,deleteAllItems:L,deleteAllCart:g,deleteCart:s,updateCart:y,deleteItem:S,cart:k,goToCheck:T,getCart:u,isLoading:a,delFloat:K}}},gt={class:"navbar navbar-expand-lg navbar-light sticky-top bg-light"},pt={class:"container"},wt=t("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[t("span",{class:"navbar-toggler-icon"})],-1),xt=t("img",{src:vt,height:"80",alt:"羅傑之家"},null,-1),yt={class:"nav-link order-md-1 position-relative","data-bs-toggle":"offcanvas",href:"#offcanvasExample",role:"button","aria-controls":"offcanvasExample",style:{width:"40px",height:"40px"}},Bt=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",fill:"currentColor",class:"bi bi-cart4",viewBox:"0 0 16 16"},[t("path",{d:"M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 0 0 1-.5-.5M3.14 5l.5 2H5V5zM6 5v2h2V5zm3 0v2h2V5zm3 0v2h1.36l.5-2zm1.11 3H12v2h.61zM11 8H9v2h2zM8 8H6v2h2zM5 8H3.89l.5 2H5zm0 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0m9-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0"})],-1),Ct={key:0,class:"rounded-circle bg-danger position-absolute start-100 translate-middle d-flex justify-content-center align-items-center",style:{width:"20px",height:"20px",top:"5px"}},kt={class:"text-white"},Tt={class:"collapse navbar-collapse",id:"navbarNav"},It={class:"navbar-nav mx-auto h4 nav-underline text-center"},Dt={class:"nav-item"},At={class:"nav-item"},Ht={class:"nav-item"},zt={class:"nav-item"},Et={class:"nav-item"},Mt={class:"container-fluid py-5 bg-light h-100"},Lt={class:"copyright text-center fs-5",style:{color:"#89b0ae"}},St=t("p",null,"羅傑之家 所有圖片皆來自於網路",-1),Vt={class:"offcanvas offcanvas-end",tabindex:"-1",id:"offcanvasExample","aria-labelledby":"offcanvasExampleLabel"},$t=t("div",{class:"offcanvas-header bg-light"},[t("h5",{class:"offcanvas-title fs-3 mt-1",id:"offcanvasExampleLabel"}," 購物車 "),t("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1),Nt={class:"offcanvas-body"},Ut={class:"mb-2 d-flex justify-content-end"},jt=["disabled"],Ft=t("hr",null,null,-1),Rt={key:0,class:"text-center my-5"},Yt=t("p",{class:"fs-4 fw-bold"},"你的購物車裡沒東西喔！",-1),Zt={key:1,class:"h4 text-success"},qt={key:2,class:"h4"},Pt={class:"check mt-3"},Gt=["disabled"];function Wt(l,o,a,e,u,g){const s=p("router-link"),y=p("router-view"),k=p("BottomBanner"),B=p("font-awesome-icon"),f=p("CartItem"),T=p("UpArrow");return d(),v(z,null,[t("nav",gt,[t("div",pt,[wt,n(s,{to:"/introduction",class:"navbar-brand"},{default:h(()=>[xt]),_:1}),t("a",yt,[Bt,e.cart.carts.length?C((d(),v("div",Ct,[t("span",kt,I(e.cart.carts.length),1)],512)),[[D,e.cart.carts.length]]):H("",!0)]),t("div",Tt,[t("ul",It,[t("li",Dt,[n(s,{to:"/aboutus",class:"nav-link","data-toggle":""},{default:h(()=>[_("關於我們")]),_:1})]),t("li",At,[n(s,{to:"/news",class:"nav-link","data-toggle":""},{default:h(()=>[_("最新消息")]),_:1})]),t("li",Ht,[n(s,{to:"/products",class:"nav-link","data-toggle":""},{default:h(()=>[_("產品一覽")]),_:1})]),t("li",zt,[n(s,{to:"/notice",class:"nav-link","data-toggle":""},{default:h(()=>[_("購買須知")]),_:1})]),t("li",Et,[n(s,{to:"/orders",class:"nav-link","data-toggle":""},{default:h(()=>[_("訂單查詢")]),_:1})])])])])]),n(y),n(k),t("div",Mt,[t("div",Lt,[St,t("p",null,[_("Copyright © 2024 "),n(s,{to:"/admin",class:"link-success"},{default:h(()=>[_("進入後台")]),_:1})])])]),t("div",Vt,[$t,t("div",Nt,[t("div",Ut,[t("button",{type:"button",class:"btn btn-outline-success",onClick:o[0]||(o[0]=(...m)=>e.deleteAllItems&&e.deleteAllItems(...m)),disabled:e.clearButtoonDisable||!e.cart.total},[C(n(B,{icon:"spinner",class:"fa-spin"},null,512),[[D,e.isLoading]]),_(" 清空購物車 ")],8,jt)]),Ft,e.cart.total===0?(d(),v("div",Rt,[Yt,t("button",{type:"button","data-bs-dismiss":"offcanvas",class:"btn btn-lg btn-success",onClick:o[1]||(o[1]=m=>e.goToProducts())},"繼續選購")])):H("",!0),(d(!0),v(z,null,G(e.cart.carts,m=>(d(),W(f,{key:m.id,cart:m,isRemovable:e.removeItem,isBtnDisabled:e.isBtnDisabled,onUpdateItem:e.updateItem,onDeleteItem:e.deleteItem},null,8,["cart","isRemovable","isBtnDisabled","onUpdateItem","onDeleteItem"]))),128)),e.cart.final_total!==e.cart.total?(d(),v("p",Zt,"折扣價：NT$ "+I(e.delFloat(e.cart.final_total)),1)):(d(),v("p",qt,"總計：NT$ "+I(e.cart.total),1)),t("div",Pt,[t("button",{type:"button",class:"btn btn-secondary w-100 fs-4","data-bs-dismiss":"offcanvas",onClick:o[2]||(o[2]=m=>e.goToCheck()),disabled:e.clearButtoonDisable||!e.cart.total},"前往結帳",8,Gt)])])]),n(T)],64)}const ee=A(bt,[["render",Wt]]);export{ee as default};
