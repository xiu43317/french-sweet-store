import{_ as h,r as m,u as g,d as b,i as v,o as p,c as f,a,f as t,g as n,E as x,m as $,j as N,F as A,Z as u,k as c}from"./index-7pBR4ziE.js";const _="https://vue3-course-api.hexschool.io/v2",M={setup(){const l=m(!1),e=g(),i=()=>{const s=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");u.defaults.headers.common.Authorization=s,u.post(`${_}/api/user/check`).then(()=>{l.value=!0}).catch(d=>{console.dir(d),alert(d.response.data.message),e.push("/login")})},r=()=>{u.post(`${_}/logout`).then(s=>{alert(s.data.message),document.cookie="hexToken=;expires=;",e.push("/login")}).catch(s=>{console.log(s)})};return b(()=>{i()}),{checkLogin:i,checkSuccess:l,signOut:r,router:e}}},w={class:"navbar navbar-expand-lg navbar-dark bg-dark"},B={class:"container-fluid"},C=a("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation"},[a("span",{class:"navbar-toggler-icon"})],-1),T={class:"collapse navbar-collapse",id:"navbarNavAltMarkup"},V={class:"navbar-nav"},y={class:"navbar-nav ms-auto"};function E(l,e,i,r,s,d){const o=v("router-link"),k=v("router-view");return p(),f(A,null,[a("nav",w,[a("div",B,[t(o,{to:"/admin/products",class:"navbar-brand"},{default:n(()=>[c("後臺系統")]),_:1}),C,a("div",T,[a("div",V,[t(o,{to:"/admin/products",class:"nav-link"},{default:n(()=>[c("產品列表")]),_:1}),t(o,{to:"/admin/coupons",class:"nav-link"},{default:n(()=>[c("優惠券")]),_:1}),t(o,{to:"/admin/orders",class:"nav-link"},{default:n(()=>[c("訂單")]),_:1}),t(o,{to:"/admin/articles",class:"nav-link"},{default:n(()=>[c("新增文章")]),_:1}),a("a",{class:"nav-link",href:"#",onClick:e[0]||(e[0]=x(F=>r.signOut(),["prevent"]))},"登出")]),a("div",y,[t(o,{to:"/",class:"nav-link"},{default:n(()=>[c("回前台")]),_:1})])])])]),r.checkSuccess?(p(),$(k,{key:0})):N("",!0)],64)}const S=h(M,[["render",E]]);export{S as default};
