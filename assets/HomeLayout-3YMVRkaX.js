import{_ as A,r as g,o as f,c as v,a as t,w as y,v as M,n as $,p as L,b as V,d as E,e as S,f as a,g as d,h as T,T as N,s as U,u as j,i as p,t as k,j as r,k as F,F as H,l as R,m as Y}from"./index-RO-PkHRX.js";import{_ as Z}from"./CartItem-DedN_tTE.js";import{n as c}from"./axios-VcXz9i4q.js";import{S as D}from"./sweetalert2.all-C9__QHwg.js";import{u as P}from"./cart-NBh0loT4.js";import{d as q}from"./math-9XHDQUjD.js";const G={setup(l){const n="background-image:url(https://images.unsplash.com/photo-1551578657-a7e74acb0135?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8Y2hvY29sYXRlfGVufDB8MHwwfHx8MA%3D%3D);",e=g(null);return{email:e,checkEmail:()=>{/^\w+((-\w+)|(\.\w+))*@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/.test(e.value)?D.fire({icon:"info",title:"訂閱優惠碼",text:"newcustomer",showCancelButton:!0,confirmButtonColor:"green",cancelButtonColor:"gray",confirmButtonText:"複製",cancelButtonText:"取消"}).then(async u=>{u.isConfirmed?navigator.clipboard.writeText("newcustomer").then(()=>{c(!0,"複製成功")}):u.isDenied&&c(!1,"取消動作")}):c(!1,"信箱格式錯誤")},bg:n}}},z=l=>(L("data-v-e683e3fb"),l=l(),V(),l),W={class:"fixed-banner-wrap mt-5"},X={class:"container-fluid"},J={class:"row"},K={class:"wrap w-100"},O={class:"title-box"},Q=z(()=>t("h4",{class:""},"立即訂閱享8折優惠碼",-1)),tt={class:"input-group input-group-lg mt-5 mx-auto fixed-input"},et=z(()=>t("i",{class:"bi bi-arrow-right"},null,-1)),ot=[et];function st(l,o,n,e,i,m){return f(),v("div",W,[t("div",X,[t("div",J,[t("div",K,[t("hgroup",O,[Q,t("div",tt,[y(t("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>e.email=s),type:"email",class:"form-control bg-white bg-opacity-50 text-dark",placeholder:"請輸入信箱"},null,512),[[M,e.email]]),t("button",{onClick:o[1]||(o[1]=s=>e.checkEmail()),class:"btn btn-outline-light",type:"submit"},ot)])]),t("div",{class:"bg-item",style:$(e.bg)},null,4)])])])])}const at=A(G,[["render",st],["__scopeId","data-v-e683e3fb"]]),nt={setup(l){const o=g(!1),n=()=>{o.value=window.scrollY>0},e=()=>{window.scrollTo({top:0,behavior:"smooth"})};return E(()=>{window.addEventListener("scroll",n)}),S(()=>{window.removeEventListener("scroll",n)}),{scrollToTop:e,handleScroll:n,isVisible:o}}},lt={class:"fixed-bottom text-end pe-3 pb-4"},it=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",fill:"currentColor",class:"bi bi-arrow-up-circle",viewBox:"0 0 16 16"},[t("path",{"fill-rule":"evenodd",d:"M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8m15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-7.5 3.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707z"})],-1),ct=[it];function rt(l,o,n,e,i,m){return f(),v("div",lt,[a(N,null,{default:d(()=>[y(t("button",{class:"bg-transparent border-0 text-secondary fw-bold up-btn",onClick:o[0]||(o[0]=(...s)=>e.scrollToTop&&e.scrollToTop(...s)),"aria-label":"scroll to top of the page"},ct,512),[[T,e.isVisible]])]),_:1})])}const dt=A(nt,[["render",rt]]),ft="/french-sweet-store/assets/logo-removebg-jA-3Dbqv.png",mt={components:{BottomBanner:at,CartItem:Z,UpArrow:dt},setup(l){const o=g(!0),n=P(),e=g(!1),i=g(!1),{getCart:m,deleteAllCart:s,deleteCart:u}=n,{cart:B}=U(n),x=j(),w=g(!1);return{isBtnDisabled:w,clearButtoonDisable:i,removeItem:o,goToProducts:()=>{x.push("/products")},deleteAllItems:()=>{D.fire({icon:"warning",title:"確定刪除整個購物車？",text:"刪除後的資料無法恢復",showCancelButton:!0,confirmButtonColor:"red",cancelButtonColor:"gray",confirmButtonText:"確定",cancelButtonText:"取消"}).then(async b=>{b.isConfirmed?(await s().then(h=>{c(!0,`全部${h.data.message}`)}).catch(h=>{console.log(h.response.data.message),c(!1,`${h.response.data.message}`)}),e.value=!0,i.value=!0,await m(),e.value=!1,i.value=!1):b.isDenied&&c(!1,"動作取消")})},deleteAllCart:s,deleteCart:u,deleteItem:async b=>{D.fire({icon:"warning",title:`確定刪除${b.product.title}`,text:"刪除後的資料無法恢復",showCancelButton:!0,confirmButtonColor:"red",cancelButtonColor:"gray",confirmButtonText:"確定",cancelButtonText:"取消"}).then(async h=>{h.isConfirmed?(i.value=!0,w.value=!0,await u(b.id).then(C=>{c(!0,`${b.product.title}${C.data.message}`)}).catch(C=>{c(!1,`${C.response.data.message}`)}),await m(),w.value=!1,i.value=!1):h.isDenied&&c(!1,"動作取消")})},cart:B,goToCheck:()=>{x.push("/check")},getCart:m,isLoading:e,delFloat:q}}},ut={class:"navbar navbar-expand-lg navbar-light sticky-top bg-light"},_t={class:"container"},ht=t("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[t("span",{class:"navbar-toggler-icon"})],-1),vt=t("img",{src:ft,height:"80",alt:""},null,-1),bt={class:"nav-link order-md-1 position-relative","data-bs-toggle":"offcanvas",href:"#offcanvasExample",role:"button","aria-controls":"offcanvasExample",style:{width:"40px",height:"40px"}},pt=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",fill:"currentColor",class:"bi bi-cart4",viewBox:"0 0 16 16"},[t("path",{d:"M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 0 0 1-.5-.5M3.14 5l.5 2H5V5zM6 5v2h2V5zm3 0v2h2V5zm3 0v2h1.36l.5-2zm1.11 3H12v2h.61zM11 8H9v2h2zM8 8H6v2h2zM5 8H3.89l.5 2H5zm0 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0m9-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0"})],-1),gt={class:"rounded-circle bg-danger position-absolute start-100 translate-middle d-flex justify-content-center align-items-center",style:{width:"20px",height:"20px",top:"5px"}},wt={class:"text-white"},xt={class:"collapse navbar-collapse",id:"navbarNav"},yt={class:"navbar-nav mx-auto h4 nav-underline text-center"},Bt={class:"nav-item"},Ct={class:"nav-item"},kt={class:"nav-item"},Tt={class:"nav-item"},Dt={class:"nav-item"},At={class:"container-fluid py-5 bg-light h-100"},It={class:"copyright text-center fs-5",style:{color:"#89b0ae"}},Ht=t("p",null,"羅傑之家 所有圖片皆來自於網路",-1),zt={class:"offcanvas offcanvas-end",tabindex:"-1",id:"offcanvasExample","aria-labelledby":"offcanvasExampleLabel"},Mt=t("div",{class:"offcanvas-header bg-light"},[t("h5",{class:"offcanvas-title fs-3 mt-1",id:"offcanvasExampleLabel"}," 購物車 "),t("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1),$t={class:"offcanvas-body"},Lt={class:"mb-2 d-flex justify-content-end"},Vt=["disabled"],Et=t("hr",null,null,-1),St={key:0,class:"text-center my-5"},Nt=t("p",{class:"fs-4 fw-bold"},"你的購物車裡沒東西喔！",-1),Ut={key:1,class:"h4 text-success"},jt={key:2,class:"h4"},Ft={class:"check mt-3"},Rt=["disabled"];function Yt(l,o,n,e,i,m){const s=p("router-link"),u=p("router-view"),B=p("BottomBanner"),x=p("font-awesome-icon"),w=p("CartItem"),I=p("UpArrow");return f(),v(H,null,[t("nav",ut,[t("div",_t,[ht,a(s,{to:"/introduction",class:"navbar-brand"},{default:d(()=>[vt]),_:1}),t("a",bt,[pt,y(t("div",gt,[t("span",wt,k(e.cart.carts.length),1)],512),[[T,e.cart.carts.length]])]),t("div",xt,[t("ul",yt,[t("li",Bt,[a(s,{to:"/aboutus",class:"nav-link"},{default:d(()=>[r("關於我們")]),_:1})]),t("li",Ct,[a(s,{to:"/news",class:"nav-link"},{default:d(()=>[r("最新消息")]),_:1})]),t("li",kt,[a(s,{to:"/products",class:"nav-link"},{default:d(()=>[r("產品一覽")]),_:1})]),t("li",Tt,[a(s,{to:"/notice",class:"nav-link"},{default:d(()=>[r("購買須知")]),_:1})]),t("li",Dt,[a(s,{to:"/orders",class:"nav-link"},{default:d(()=>[r("訂單查詢")]),_:1})])])])])]),a(u),a(B),t("div",At,[t("div",It,[Ht,t("p",null,[r("Copyright © 2024 "),a(s,{to:"/admin",class:"link-success"},{default:d(()=>[r("進入後台")]),_:1})])])]),t("div",zt,[Mt,t("div",$t,[t("div",Lt,[t("button",{type:"button",class:"btn btn-outline-success",onClick:o[0]||(o[0]=(..._)=>e.deleteAllItems&&e.deleteAllItems(..._)),disabled:e.clearButtoonDisable||!e.cart.total},[y(a(x,{icon:"spinner",class:"fa-spin"},null,512),[[T,e.isLoading]]),r(" 清空購物車 ")],8,Vt)]),Et,e.cart.total===0?(f(),v("div",St,[Nt,t("button",{type:"button","data-bs-dismiss":"offcanvas",class:"btn btn-lg btn-success",onClick:o[1]||(o[1]=_=>e.goToProducts())},"繼續選購")])):F("",!0),(f(!0),v(H,null,R(e.cart.carts,_=>(f(),Y(w,{key:_.id,cart:_,isRemovable:e.removeItem,isBtnDisabled:e.isBtnDisabled,onDeleteItem:e.deleteItem},null,8,["cart","isRemovable","isBtnDisabled","onDeleteItem"]))),128)),e.cart.final_total!==e.cart.total?(f(),v("p",Ut,"折扣價：NT$ "+k(e.delFloat(e.cart.final_total)),1)):(f(),v("p",jt,"總計：NT$ "+k(e.cart.total),1)),t("div",Ft,[t("button",{type:"button",class:"btn btn-secondary w-100 fs-4","data-bs-dismiss":"offcanvas",onClick:o[2]||(o[2]=_=>e.goToCheck()),disabled:e.clearButtoonDisable||!e.cart.total},"前往結帳",8,Rt)])])]),a(I)],64)}const Ot=A(mt,[["render",Yt]]);export{Ot as default};
