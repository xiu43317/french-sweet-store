import{_ as k,G as B,u as D,r,d as x,i as u,o as d,c as y,f as _,a,H as l,F as b,l as w,m as L,k as M}from"./index-d2Hmcrb7.js";import{P as T,a as E}from"./ProductDetailModal-dGkQeVke.js";import{a as G}from"./BottomPagination-rQsco21s.js";import{a as N}from"./axios-QAzFhJTr.js";import"./cart-80m3wcog.js";const V={components:{ProductCard:T,BottomPagination:G,ProductDetailModal:E},setup(f){const e=B(),g=D(),t=r({}),m=r({}),h=r({}),p=r(null),i=r(!1),s=r(e.query.category?e.query.category:"全部"),v=n=>{s.value=n,n==="全部"?o(1):o(1,s.value),g.push(`/products?category=${n}`)},o=(n,C)=>{i.value=!0,N.getProducts(n,C).then(c=>{t.value=[...c.data.products],m.value={...c.data.pagination},window.scroll(0,0),i.value=!1}).catch(c=>{console.log(c),i.value=!1})},P=n=>{g.push(`/product/${n.id}`)};return x(()=>{s.value==="全部"?o(1):o(1,s.value)}),{modal:p,tempProduct:h,pages:m,products:t,category:s,changeCategory:v,getProducts:o,goToDetail:P,isLoading:i}}},q={class:"container"},F={class:"row"},R={class:"col-md-3"},j={class:"list-group text-center side-menu"},z=a("li",{class:"list-group-item bg-light h4 mb-0 text-dark fw-bold"}," 甜點列表 ",-1),H={class:"col-md-9"},A={class:"row"},I={class:"d-flex justify-content-center"};function J(f,e,g,t,m,h){const p=u("myLoading"),i=u("ProductCard"),s=u("BottomPagination"),v=u("ProductDetailModal");return d(),y(b,null,[_(p,{active:t.isLoading},null,8,["active"]),a("div",q,[a("div",F,[a("div",R,[a("ul",j,[z,a("button",{type:"button",onClick:e[0]||(e[0]=o=>t.changeCategory("全部")),class:l(["list-group-item list-group-item-action list-group-item-light h4 mb-0",{active:t.category==="全部"}])},"所有甜點",2),a("button",{type:"button",onClick:e[1]||(e[1]=o=>t.changeCategory("蛋糕")),class:l(["list-group-item list-group-item-action list-group-item-light h4 mb-0",{active:t.category==="蛋糕"}])},"特色蛋糕",2),a("button",{type:"button",onClick:e[2]||(e[2]=o=>t.changeCategory("泡芙")),class:l(["list-group-item list-group-item-action list-group-item-light h4 mb-0",{active:t.category==="泡芙"}])},"閃電泡芙",2),a("button",{type:"button",onClick:e[3]||(e[3]=o=>t.changeCategory("千層酥")),class:l(["list-group-item list-group-item-action list-group-item-light h4 mb-0",{active:t.category==="千層酥"}])},"酥脆千層",2),a("button",{type:"button",onClick:e[4]||(e[4]=o=>t.changeCategory("馬卡龍")),class:l(["list-group-item list-group-item-action list-group-item-light h4 mb-0",{active:t.category==="馬卡龍"}])}," 經典馬卡龍",2)])]),a("div",H,[a("div",A,[(d(!0),y(b,null,w(t.products,o=>(d(),y("div",{class:"col-md-4 mb-5 mt-1",key:o.id},[o.is_enabled?(d(),L(i,{key:0,product:o,onGoToDetail:t.goToDetail},null,8,["product","onGoToDetail"])):M("",!0)]))),128))]),a("div",I,[_(s,{onEmitPage:t.getProducts,pages:t.pages},null,8,["onEmitPage","pages"])])])])]),_(v,{ref:"modal",product:t.tempProduct},null,8,["product"])],64)}const W=k(V,[["render",J]]);export{W as default};
