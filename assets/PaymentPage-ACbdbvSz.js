import{_ as g,u as w,o as p,c as y,a as s,p as b,b as O,G as x,r as i,d as F,i as u,f,m as _,F as k}from"./index-RO-PkHRX.js";import{F as C}from"./FlowChart-AzY4UWxX.js";import{O as L}from"./OrderDetail-zAWxVS8f.js";import{a as h,n as v}from"./axios-VcXz9i4q.js";import"./CartItem-DedN_tTE.js";import"./math-9XHDQUjD.js";const B={setup(t){const o=w();return{goToProducts:()=>{o.push("/products?categlory=all")}}}},P=t=>(b("data-v-f81aefba"),t=t(),O(),t),$={class:"container"},I={class:"d-flex justify-content-evenly flex-column align-items-center mh-400 py-3"},M=P(()=>s("p",{class:"fs-1 fw-bold"},"付款完成",-1)),T=P(()=>s("div",null,[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",fill:"currentColor",class:"bi bi-cart-check text-success",viewBox:"0 0 16 16"},[s("path",{d:"M11.354 6.354a.5.5 0 0 0-.708-.708L8 8.293 6.854 7.146a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0z"}),s("path",{d:"M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1zm3.915 10L3.102 4h10.796l-1.313 7zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0m7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0"})])],-1));function z(t,o,r,e,n,c){return p(),y("div",$,[s("div",I,[M,T,s("button",{type:"button",class:"btn btn-lg btn-secondary py-2 px-5",onClick:o[0]||(o[0]=l=>e.goToProducts())}," 繼續選購 ")])])}const A=g(B,[["render",z],["__scopeId","data-v-f81aefba"]]),D={components:{FlowChart:C,OrderDetail:L,FinishPayment:A},setup(t){const o=x(),r=i(50),e=i(!1),n=i(!1),c=i(null),l=a=>{e.value=!0,h.getOrder(a).then(d=>{c.value=d.data.order,e.value=!1,c.value.is_paid===!0&&(n.value=!0,r.value=100)}).catch(d=>{v(d.response.data.message),e.value=!1})},m=()=>{e.value=!0,h.payOrder(o.query.id).then(a=>{e.value=!1,a.data.success&&(n.value=!0),r.value=100,window.scrollTo(0,0)}).catch(a=>{e.value=!1,v(a.response.data.message)})};return F(()=>{l(o.query.id)}),{isLoading:e,order:c,getOrder:l,isPaid:n,progress:r,payOrder:m}}};function S(t,o,r,e,n,c){const l=u("myLoading"),m=u("FlowChart"),a=u("FinishPayment"),d=u("OrderDetail");return p(),y(k,null,[f(l,{active:e.isLoading},null,8,["active"]),f(m,{outProgress:e.progress},null,8,["outProgress"]),e.isPaid?(p(),_(a,{key:0})):(p(),_(d,{key:1,order:e.order,onPayOrder:e.payOrder},null,8,["order","onPayOrder"]))],64)}const G=g(D,[["render",S]]);export{G as default};
