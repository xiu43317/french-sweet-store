import{r as h,d as x,y as $,i as p,o as r,c as u,a as s,f as g,g as f,j as d,t as _,G as N,F as y}from"./index-KtGT-tiA.js";import{a as i,n as v}from"./axios-cy6tpPZ-.js";const w={class:"container mt-5"},A={class:"d-flex justify-content-between fs-5"},L={key:0},I=s("i",{class:"bi bi-chevron-double-left"},null,-1),P={key:1},j=s("span",null,null,-1),B=[j],D={key:2},M=s("i",{class:"bi bi-chevron-double-right"},null,-1),R={key:3},T={__name:"ArticlePages",props:["currentNum"],setup(b){const o=b;let e=parseInt(o.currentNum);const n=h(""),l=h(""),m=()=>{e=parseInt(o.currentNum),e%10===0?(i.getArticles(e/10+1).then(t=>{t.data.articles?l.value=t.data.articles.filter(a=>a.num===e+1)[0]:l.value=""}).catch(t=>{v(t.response.data.message)}),i.getArticles(e/10).then(t=>{const a=t.data.articles.filter(c=>c.num===e-1)[0];n.value=a}).catch(t=>{v(t.response.data.message)})):e===1?(n.value="",console.log("next",n.value),console.log("nextNum",0),i.getArticles(1).then(t=>{l.value=t.data.articles.filter(a=>a.num===e+1)[0],console.log("prev",l.value.id),console.log("prevNum",l.value.num)}).catch(t=>{v(t.response.data.message)})):e%10===1&&e!==1?(i.getArticles(e/10).then(t=>{const a=t.data.articles.filter(c=>c.num===e-1);n.value=a[0],console.log("next:",n.value.id),console.log("nextNum:",n.value.num)}),i.getArticles(e/10+1).then(t=>{t.data.articles?n.value=t.data.articles.filter(a=>a.num===e+1)[0]:l.value="",console.log("prev:",n.value.id),console.log("prevNum",n.value.num)})):i.getArticles(e/10+1).then(t=>{n.value=t.data.articles.filter(a=>a.num===e-1)[0],t.data.articles.filter(a=>a.num===e+1)[0]?l.value=t.data.articles.filter(a=>a.num===e+1)[0]:l.value=""}).catch(t=>{v(t.response.data.message)})};return x(()=>{m()}),$(()=>o.currentNum,()=>{m()}),(t,a)=>{const c=p("router-link");return r(),u("div",w,[s("div",A,[l.value?(r(),u("strong",L,[g(c,{class:"text-decoration-none link-dark",to:`/onenews/${l.value.id}/num/${l.value.num}`},{default:f(()=>[I,d(" 較舊一篇："+_(l.value.title),1)]),_:1},8,["to"])])):(r(),u("strong",P,B)),n.value?(r(),u("strong",D,[g(c,{class:"text-decoration-none link-dark",to:`/onenews/${n.value.id}/num/${n.value.num}`},{default:f(()=>[d(" 較新一篇："+_(n.value.title)+" ",1),M]),_:1},8,["to"])])):(r(),u("strong",R))])])}}},V={class:"container"},C={"aria-label":"breadcrumb"},F={class:"breadcrumb"},H={class:"breadcrumb-item"},S={class:"breadcrumb-item active","aria-current":"page"},q={class:"row justify-content-center"},E={class:"col-8"},G={class:"text-muted"},O=s("i",{class:"bi bi-calendar"},null,-1),U={class:"text-muted"},z=s("i",{class:"bi bi-pencil-square"},null,-1),J=["src","alt"],K=s("hr",null,null,-1),Q=["innerHTML"],Y={__name:"NewsOnePage",setup(b){const o=N(),e=h({}),n=h(!1),l=t=>{n.value=!0,i.getArticle(t).then(a=>{e.value={...a.data.article},e.value.create_at=new Date(e.value.create_at*1e3).toLocaleDateString(),m.value=o.params.num,n.value=!1}).catch(a=>{v(a.response.data.message),n.value=!1})},m=h(o.params.num);return x(()=>{l(o.params.id)}),$(()=>o.params.id,async t=>{await l(o.params.id)}),(t,a)=>{const c=p("myLoading"),k=p("RouterLink");return r(),u(y,null,[g(c,{active:n.value},null,8,["active"]),s("div",V,[s("nav",C,[s("ol",F,[s("li",H,[g(k,{to:"/news"},{default:f(()=>[d("消息列表")]),_:1})]),s("li",S,_(e.value.title),1)])]),s("div",q,[s("article",E,[s("h2",null,_(e.value.title),1),s("p",null,[s("strong",G,[O,d(" "+_(e.value.create_at),1)]),d(" - "),s("strong",U,[z,d(" 作者："+_(e.value.author),1)])]),s("img",{src:e.value.imageUrl,alt:e.value.title,class:"img-fluid mb-3"},null,8,J),K,s("div",{innerHTML:e.value.content,class:"fs-5"},null,8,Q)])])]),g(T,{currentNum:m.value},null,8,["currentNum"])],64)}}};export{Y as default};
