import{_ as k,G as B,u as D,r as l,d as x,i as d,o as u,c as y,f as _,a,H as r,F as h,l as w,m as L,k as M}from"./index-invxNhHQ.js";import{P as T,a as E}from"./ProductDetailModal-YO5uY1ce.js";import{A as G}from"./BottomPagination-51KYOAk7.js";import{a as N}from"./axios-N3QjHTje.js";import"./cart-Qp5udG6S.js";const V={components:{ProductCard:T,BottomPagination:G,ProductDetailModal:E},setup(b){const e=B(),g=D(),t=l({}),m=l({}),f=l({}),p=l(null),i=l(!1),s=l(e.query.category?e.query.category:"全部"),v=n=>{s.value=n,n==="全部"?o(1):o(1,s.value),g.push(`/products?category=${n}`)},o=(n,C)=>{i.value=!0,N.getProducts(n,C).then(c=>{t.value=[...c.data.products],m.value={...c.data.pagination},window.scroll(0,0),i.value=!1}).catch(c=>{console.log(c),i.value=!1})},P=n=>{g.push(`/product/${n.id}`)};return x(()=>{s.value==="全部"?o(1):o(1,s.value)}),{modal:p,tempProduct:f,pages:m,products:t,category:s,changeCategory:v,getProducts:o,goToDetail:P,isLoading:i}}},q={class:"container"},A={class:"row"},F={class:"col-md-3"},R={class:"list-group text-center side-menu"},j=a("li",{class:"list-group-item bg-light h4 mb-0 text-dark fw-bold"}," 甜點列表 ",-1),z={class:"col-md-9"},H={class:"row"},I={class:"d-flex justify-content-center"};function J(b,e,g,t,m,f){const p=d("myLoading"),i=d("ProductCard"),s=d("BottomPagination"),v=d("ProductDetailModal");return u(),y(h,null,[_(p,{active:t.isLoading},null,8,["active"]),a("div",q,[a("div",A,[a("div",F,[a("ul",R,[j,a("button",{type:"button",onClick:e[0]||(e[0]=o=>t.changeCategory("全部")),class:r(["list-group-item list-group-item-action list-group-item-light h4 mb-0",{active:t.category==="全部"}])},"所有甜點",2),a("button",{type:"button",onClick:e[1]||(e[1]=o=>t.changeCategory("蛋糕")),class:r(["list-group-item list-group-item-action list-group-item-light h4 mb-0",{active:t.category==="蛋糕"}])},"特色蛋糕",2),a("button",{type:"button",onClick:e[2]||(e[2]=o=>t.changeCategory("泡芙")),class:r(["list-group-item list-group-item-action list-group-item-light h4 mb-0",{active:t.category==="泡芙"}])},"閃電泡芙",2),a("button",{type:"button",onClick:e[3]||(e[3]=o=>t.changeCategory("千層酥")),class:r(["list-group-item list-group-item-action list-group-item-light h4 mb-0",{active:t.category==="千層酥"}])},"酥脆千層",2),a("button",{type:"button",onClick:e[4]||(e[4]=o=>t.changeCategory("馬卡龍")),class:r(["list-group-item list-group-item-action list-group-item-light h4 mb-0",{active:t.category==="馬卡龍"}])}," 經典馬卡龍",2)])]),a("div",z,[a("div",H,[(u(!0),y(h,null,w(t.products,o=>(u(),y("div",{class:"col-md-4 mb-5 mt-1",key:o.id},[o.is_enabled?(u(),L(i,{key:0,product:o,onGoToDetail:t.goToDetail,"data-aos":"flip-left"},null,8,["product","onGoToDetail"])):M("",!0)]))),128))]),a("div",I,[_(s,{onEmitPage:t.getProducts,pages:t.pages},null,8,["onEmitPage","pages"])])])])]),_(v,{ref:"modal",product:t.tempProduct},null,8,["product"])],64)}const W=k(V,[["render",J]]);export{W as default};
