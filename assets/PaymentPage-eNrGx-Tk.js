import{_ as f,r as l,u as b,o as p,c as g,a as d,t as P,H as x,I as w,d as O,i as u,f as m,m as v,F}from"./index-WOUMmO7h.js";import{F as k}from"./FlowChart-RNyV1Uxg.js";import{O as C}from"./OrderDetail-vGHJy_H1.js";import{a as h,n as _}from"./axios-qPne0Ogh.js";import"./CartItem-JgFhM9q0.js";import"./math-9XHDQUjD.js";const T={props:["orderId"],setup(s){const t=l(s.orderId),a=b();return{id:t,goToSearch:()=>{a.push(`/orders?id=${t.value}`)},goToProducts:()=>{a.push("/products?categlory=all")}}}},I={class:"container"},L={class:"d-flex justify-content-evenly flex-column align-items-center mh-400 py-3"},B=x('<div data-v-ab92683e><svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" fill="currentColor" class="bi bi-cart-check text-success" viewBox="0 0 16 16" data-v-ab92683e><path d="M11.354 6.354a.5.5 0 0 0-.708-.708L8 8.293 6.854 7.146a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0z" data-v-ab92683e></path><path d="M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1zm3.915 10L3.102 4h10.796l-1.313 7zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0m7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0" data-v-ab92683e></path></svg></div><p class="fs-1 fw-bold" data-v-ab92683e>付款完成</p><span class="fs-4 text-center" data-v-ab92683e>你的訂單編號</span>',3),S={class:"fs-3"},D={class:"text-center"};function M(s,t,a,e,r,i){return p(),g("div",I,[d("div",L,[B,d("span",S,P(e.id),1),d("div",D,[d("button",{type:"button",class:"btn btn-lg btn-secondary py-2 px-5 m-1",onClick:t[0]||(t[0]=n=>e.goToProducts())}," 繼續選購 "),d("button",{type:"button",class:"btn btn-lg btn-outline-success py-2 px-5 m-1",onClick:t[1]||(t[1]=n=>e.goToSearch())}," 查詢訂單 ")])])])}const $=f(T,[["render",M],["__scopeId","data-v-ab92683e"]]),z={components:{FlowChart:k,OrderDetail:C,FinishPayment:$},setup(){const s=w(),t=l(50),a=l(!1),e=l(!1),r=l(null),i=o=>{a.value=!0,h.getOrder(o).then(c=>{r.value=c.data.order,r.value.is_paid===!0&&(e.value=!0,t.value=100),a.value=!1}).catch(c=>{_(c.response.data.message),a.value=!1})},n=()=>{a.value=!0,h.payOrder(s.query.id).then(o=>{o.data.success&&(e.value=!0),t.value=100,window.scrollTo(0,0),a.value=!1}).catch(o=>{_(o.response.data.message),a.value=!1})};return O(()=>{i(s.query.id)}),{isLoading:a,order:r,getOrder:i,isPaid:e,progress:t,payOrder:n}}};function A(s,t,a,e,r,i){const n=u("myLoading"),o=u("FlowChart"),c=u("FinishPayment"),y=u("OrderDetail");return p(),g(F,null,[m(n,{active:e.isLoading},null,8,["active"]),m(o,{outProgress:e.progress},null,8,["outProgress"]),e.isPaid?(p(),v(c,{key:0,orderId:e.order.id},null,8,["orderId"])):(p(),v(y,{key:1,order:e.order,onPayOrder:e.payOrder},null,8,["order","onPayOrder"]))],64)}const E=f(z,[["render",A]]);export{E as default};
