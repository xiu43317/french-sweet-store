import{_ as k,G as B,u as D,r as l,d as x,i as d,o as g,c as y,f as _,a,H as r,F as f,l as w,m as L,k as M}from"./index-KtGT-tiA.js";import{P as T,a as E}from"./ProductDetailModal-EcxxMpRy.js";import{a as G}from"./BottomPagination-dUngVKRZ.js";import{a as N}from"./axios-cy6tpPZ-.js";import"./cart-xCAQ-gi3.js";const V={components:{ProductCard:T,BottomPagination:G,ProductDetailModal:E},setup(h){const e=B(),b=D(),t=l({}),m=l({}),p=l({}),c=l(null),i=l(!1),n=l(e.query.category?e.query.category:"全部"),v=s=>{n.value=s,console.log(n.value),s==="全部"?o(1):o(1,n.value),b.push(`/products?category=${s}`)},o=(s,C)=>{i.value=!0,N.getProducts(s,C).then(u=>{t.value=[...u.data.products],m.value={...u.data.pagination},window.scroll(0,0),i.value=!1}).catch(u=>{console.log(u),i.value=!1})},P=s=>{p.value=s,setTimeout(()=>{c.value.openModal()},500)};return x(()=>{n.value==="全部"?o(1):o(1,n.value)}),{modal:c,tempProduct:p,pages:m,products:t,category:n,changeCategory:v,getProducts:o,goToDetail:P,isLoading:i}}},q={class:"container"},F={class:"row"},R={class:"col-md-3"},j={class:"list-group text-center side-menu"},z=a("li",{class:"list-group-item bg-light h4 mb-0 text-dark fw-bold"}," 甜點列表 ",-1),H={class:"col-md-9"},A={class:"row"},I={class:"d-flex justify-content-center"};function J(h,e,b,t,m,p){const c=d("myLoading"),i=d("ProductCard"),n=d("BottomPagination"),v=d("ProductDetailModal");return g(),y(f,null,[_(c,{active:t.isLoading},null,8,["active"]),a("div",q,[a("div",F,[a("div",R,[a("ul",j,[z,a("button",{type:"button",onClick:e[0]||(e[0]=o=>t.changeCategory("全部")),class:r(["list-group-item list-group-item-action list-group-item-light h4 mb-0",{active:t.category==="全部"}])},"所有甜點",2),a("button",{type:"button",onClick:e[1]||(e[1]=o=>t.changeCategory("蛋糕")),class:r(["list-group-item list-group-item-action list-group-item-light h4 mb-0",{active:t.category==="蛋糕"}])},"特色蛋糕",2),a("button",{type:"button",onClick:e[2]||(e[2]=o=>t.changeCategory("泡芙")),class:r(["list-group-item list-group-item-action list-group-item-light h4 mb-0",{active:t.category==="泡芙"}])},"閃電泡芙",2),a("button",{type:"button",onClick:e[3]||(e[3]=o=>t.changeCategory("千層酥")),class:r(["list-group-item list-group-item-action list-group-item-light h4 mb-0",{active:t.category==="千層酥"}])},"酥脆千層",2),a("button",{type:"button",onClick:e[4]||(e[4]=o=>t.changeCategory("馬卡龍")),class:r(["list-group-item list-group-item-action list-group-item-light h4 mb-0",{active:t.category==="馬卡龍"}])}," 經典馬卡龍",2)])]),a("div",H,[a("div",A,[(g(!0),y(f,null,w(t.products,o=>(g(),y("div",{class:"col-md-4 mb-5 mt-1",key:o.id},[o.is_enabled?(g(),L(i,{key:0,product:o,onGoToDetail:t.goToDetail},null,8,["product","onGoToDetail"])):M("",!0)]))),128))]),a("div",I,[_(n,{onEmitPage:t.getProducts,pages:t.pages},null,8,["onEmitPage","pages"])])])])]),_(v,{ref:"modal",product:t.tempProduct},null,8,["product"])],64)}const W=k(V,[["render",J]]);export{W as default};
