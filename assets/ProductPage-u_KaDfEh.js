import{s as V,I as P,r as u,d as T,i as b,o as m,c as p,f as g,a as s,t as c,w as y,G as L,F as w,l as q,h as B,k as I,j,H as D}from"./index-7pBR4ziE.js";import{a as F,n as d}from"./axios-Dh73-l90.js";import{u as G}from"./cart-jHnGYyxG.js";const M={class:"container"},Q=D('<nav style="--bs-breadcrumb-divider:&#39;&gt;&#39;;" aria-label="breadcrumb" class="mt-3"><ol class="breadcrumb"><li class="breadcrumb-item"><a class="link-secondary fs-5 text-decoration-none" href="#/products">產品列表</a></li><li class="breadcrumb-item text-success fw-bold fs-5" aria-current="page">產品資訊</li></ol></nav>',1),R={key:0},U={class:"row"},z={class:"col-md-6"},E=["src","alt"],H={class:"col-md-6 d-flex flex-column"},A={class:"fs-1 fw-bold mb-3"},J={class:"badge bg-success rounded-pill fs-6 mb-3"},K={class:"fs-5 my-3"},O={class:"h4"},W={class:"fs-6 mb-3"},X={class:"mb-2 mt-auto"},Y={class:"input-group"},Z=["disabled"],ss=s("option",{default:"",disabled:""},"請選擇數量",-1),es=["value"],ts=["disabled"],as=s("hr",null,null,-1),os={class:"row mt-3"},ls={class:"col-lg-8 col-12"},cs=s("p",{class:"fs-3"},"商品資訊：",-1),ns={class:"fs-4"},is=s("br",null,null,-1),ds=s("p",{class:"fs-3"},"保存方式：",-1),rs={class:"fs-4"},ps={__name:"ProductPage",setup(us){const f=G(),{createCart:x,updateCart:$,getCart:h}=f,{cart:_}=V(f),C=P(),n=u(!1),r=u(!1),i=u(1),e=u({}),S=()=>{r.value=!0,F.getProduct(C.params.id).then(o=>{e.value=o.data.product,r.value=!1}).catch(o=>{d(!1,o.response.data.message),r.value=!1})},k=async()=>{n.value=!0;const o=_.value.carts.findIndex(t=>t.product_id===e.value.id),l={data:{product_id:e.value.id,qty:i.value}};if(o!==-1){const t=_.value.carts[o].qty+i.value,v=_.value.carts[o].id;l.data.qty=t,await $(v,l).then(a=>{d(!0,`${e.value.title}${a.data.message}`),n.value=!1}).catch(a=>{d(!1,`${a.response.data.message}`)}),await h(),i.value=1}else await x(l).then(t=>{d(!0,`${e.value.title}${t.data.message}`),n.value=!1}).catch(t=>{d(!1,`${t.response.data.message}`)}),await h(),i.value=1};return T(()=>{S()}),(o,l)=>{const t=b("myLoading"),v=b("font-awesome-icon");return m(),p(w,null,[g(t,{active:r.value},null,8,["active"]),s("div",M,[Q,e.value?(m(),p("div",R,[s("div",U,[s("div",z,[s("img",{class:"img-fluid object-fit-cover w-100 mb-2",src:e.value.imageUrl,alt:e.value.title,style:{"max-height":"400px"},"data-aos":"zoom-in"},null,8,E)]),s("div",H,[s("h4",A,c(e.value.title),1),s("div",null,[s("span",J,c(e.value.category),1)]),s("p",K,"尺寸/包裝："+c(e.value.description),1),s("div",O,"售價：NT$ "+c(e.value.price)+" 元",1),s("del",W,"原價：NT$ "+c(e.value.origin_price)+" 元",1),s("div",X,[s("div",Y,[y(s("select",{class:"form-select",id:"inputGroupSelect02","onUpdate:modelValue":l[0]||(l[0]=a=>i.value=a),disabled:n.value},[ss,(m(),p(w,null,q(10,(a,N)=>s("option",{value:a,key:N},c(a),9,es)),64))],8,Z),[[L,i.value]]),s("button",{disabled:n.value,type:"button",class:"btn btn-success",onClick:l[1]||(l[1]=a=>k())},[y(g(v,{icon:"spinner",class:"fa-spin"},null,512),[[B,n.value]]),I(" 加入購物車 ")],8,ts)])])])]),as])):j("",!0),s("div",os,[s("div",ls,[cs,s("p",ns,c(e.value.content),1),is,ds,s("p",rs,c(e.value.presever),1)])])])],64)}}};export{ps as default};
