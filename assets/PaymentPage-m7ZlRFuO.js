import{_ as g,r as l,u as P,o as p,c as v,a,t as w,p as x,b as O,I as F,d as I,i as u,f as m,m as _,F as k}from"./index-7pBR4ziE.js";import{F as C}from"./FlowChart-dGkOJJHT.js";import{O as S}from"./OrderDetail-JP5OjMF-.js";import{a as h,n as f}from"./axios-Dh73-l90.js";import"./CartItem-x1TJMJvE.js";import"./math-9XHDQUjD.js";const T={props:["orderId"],setup(s){const o=l(s.orderId),t=P();return{id:o,goToSearch:()=>{t.push(`/orders?id=${o.value}`)},goToProducts:()=>{t.push("/products?categlory=all")}}}},y=s=>(x("data-v-a497dceb"),s=s(),O(),s),L={class:"container"},B={class:"d-flex justify-content-evenly flex-column align-items-center mh-400 py-3"},D=y(()=>a("p",{class:"fs-1 fw-bold"},"付款完成",-1)),M={class:"fs-3 text-center"},$=y(()=>a("div",null,[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",fill:"currentColor",class:"bi bi-cart-check text-success",viewBox:"0 0 16 16"},[a("path",{d:"M11.354 6.354a.5.5 0 0 0-.708-.708L8 8.293 6.854 7.146a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0z"}),a("path",{d:"M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1zm3.915 10L3.102 4h10.796l-1.313 7zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0m7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0"})])],-1)),z={class:"text-center"};function A(s,o,t,e,n,i){return p(),v("div",L,[a("div",B,[D,a("span",M,"你的訂單編號："+w(e.id),1),$,a("div",z,[a("button",{type:"button",class:"btn btn-lg btn-secondary py-2 px-5 m-1",onClick:o[0]||(o[0]=c=>e.goToProducts())}," 繼續選購 "),a("button",{type:"button",class:"btn btn-lg btn-outline-success py-2 px-5 m-1",onClick:o[1]||(o[1]=c=>e.goToSearch())}," 查詢訂單 ")])])])}const q=g(T,[["render",A],["__scopeId","data-v-a497dceb"]]),N={components:{FlowChart:C,OrderDetail:S,FinishPayment:q},setup(){const s=F(),o=l(50),t=l(!1),e=l(!1),n=l(null),i=r=>{t.value=!0,h.getOrder(r).then(d=>{n.value=d.data.order,n.value.is_paid===!0&&(e.value=!0,o.value=100),t.value=!1}).catch(d=>{f(d.response.data.message),t.value=!1})},c=()=>{t.value=!0,h.payOrder(s.query.id).then(r=>{r.data.success&&(e.value=!0),o.value=100,window.scrollTo(0,0),t.value=!1}).catch(r=>{f(r.response.data.message),t.value=!1})};return I(()=>{i(s.query.id)}),{isLoading:t,order:n,getOrder:i,isPaid:e,progress:o,payOrder:c}}};function R(s,o,t,e,n,i){const c=u("myLoading"),r=u("FlowChart"),d=u("FinishPayment"),b=u("OrderDetail");return p(),v(k,null,[m(c,{active:e.isLoading},null,8,["active"]),m(r,{outProgress:e.progress},null,8,["outProgress"]),e.isPaid?(p(),_(d,{key:0,orderId:e.order.id},null,8,["orderId"])):(p(),_(b,{key:1,order:e.order,onPayOrder:e.payOrder},null,8,["order","onPayOrder"]))],64)}const K=g(N,[["render",R]]);export{K as default};
