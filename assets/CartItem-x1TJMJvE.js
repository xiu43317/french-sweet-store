import{r as m,y as u,i as b,o,c as l,a as e,t as i,w as p,v as w,O as x,E as g,h as V,f as B,j as k}from"./index-7pBR4ziE.js";import{d as D}from"./math-9XHDQUjD.js";import{n as I}from"./axios-Dh73-l90.js";const C={class:"row"},M=["src","alt"],N={class:"col-8 d-flex justify-content-between"},$={class:"d-flex flex-column justify-content-evenly"},j={class:"lh-sm fw-bold fs-5"},q={class:"d-flex align-items-center"},z=["disabled"],T={key:0},H={key:1,class:"text-success mt-1"},E=["disabled"],L=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"currentColor",class:"bi bi-trash",viewBox:"0 0 16 16"},[e("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"}),e("path",{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"})],-1),R=e("hr",null,null,-1),F={__name:"CartItem",props:["cart","isRemovable","isBtnDisabled"],emits:["deleteItem","updateItem"],setup(h,{emit:v}){const t=h,r=v,f=()=>{r("deleteItem",t.cart),n.value=!0},_=()=>{if(s.value<0)I(!1,"數量不得小於1"),s.value=t.cart.qty;else{const d={data:{product_id:t.cart.product.id,qty:s.value}};r("updateItem",t.cart.id,d)}},s=m(t.cart.qty);u(()=>t.isBtnDisabled,()=>{t.isBtnDisabled||(n.value=!1)}),u(()=>t.cart,()=>{s.value=t.cart.qty});const n=m(!1);return(d,a)=>{const y=b("font-awesome-icon");return o(),l("div",null,[e("div",C,[e("img",{src:t.cart.product.imageUrl,class:"img-fluid object-fit-cover col-4",style:{height:"100px"},alt:t.cart.product.title},null,8,M),e("div",N,[e("div",$,[e("p",j,i(t.cart.product.title),1),e("div",q,[e("span",null,"NT$ "+i(t.cart.product.price)+" x ",1),p(e("input",{type:"number",class:"form-control ms-2",min:"1",disabled:t.isBtnDisabled,"onUpdate:modelValue":a[0]||(a[0]=c=>s.value=c),style:{width:"60px",height:"30px"},onChange:a[1]||(a[1]=c=>_())},null,40,z),[[w,s.value]])]),t.cart.total===t.cart.final_total?(o(),l("span",T,"小計：NT$ "+i(t.cart.total),1)):(o(),l("span",H,"折扣價：NT$ "+i(x(D)(t.cart.final_total)),1))]),t.isRemovable?(o(),l("a",{key:0,href:"#",class:"my-auto link-dark",onClick:a[2]||(a[2]=g(c=>f(),["prevent"])),disabled:t.isBtnDisabled},[p(B(y,{icon:"spinner",class:"fa-spin"},null,512),[[V,n.value&&t.isBtnDisabled]]),L],8,E)):k("",!0)])]),R])}}};export{F as _};
