import{s as V,G as P,r as u,d as T,i as b,o as _,c as p,f as g,a as e,t as n,w as y,I as L,F as w,l as j,h as q,j as B,k as I,E as D}from"./index-eVg9S7XR.js";import{a as E,n as d}from"./axios-e9KRWaGs.js";import{u as F}from"./cart-KQ96yXPZ.js";const G={class:"container"},M=D('<nav style="--bs-breadcrumb-divider:&#39;&gt;&#39;;" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="#/products">產品列表</a></li><li class="breadcrumb-item active" aria-current="page">產品資訊</li></ol></nav>',1),Q={key:0},R={class:"fs-3 fw-bold text-center mb-3"},U={class:"row"},z={class:"col-md-6"},A=["src"],H={class:"col-md-6 d-flex flex-column justify-content-evenly"},J={class:"badge bg-success rounded-pill fs-6 mb-3"},K={class:"h5"},O={class:"h6"},W={class:"mt-3"},X={class:"input-group"},Y=["disabled"],Z=e("option",{default:"",disabled:""},"請選擇數量",-1),ee=["value"],te=["disabled"],ne={__name:"ProductPage",setup(ae){const f=F(),{createCart:x,updateCart:$,getCart:h}=f,{cart:v}=V(f),C=P(),c=u(!1),r=u(!1),i=u(1),t=u(null),S=()=>{r.value=!0,E.getProduct(C.params.id).then(o=>{t.value=o.data.product,r.value=!1}).catch(o=>{d(!1,o.response.data.message),r.value=!1})},N=async()=>{c.value=!0;const o=v.value.carts.findIndex(a=>a.product_id===t.value.id),l={data:{product_id:t.value.id,qty:i.value}};if(o!==-1){const a=v.value.carts[o].qty+i.value,m=v.value.carts[o].id;l.data.qty=a,await $(m,l).then(s=>{d(!0,`${t.value.title}${s.data.message}`),c.value=!1}).catch(s=>{d(!1,`${s.response.data.message}`)}),await h(),i.value=1}else await x(l).then(a=>{d(!0,`${t.value.title}${a.data.message}`),c.value=!1}).catch(a=>{d(!1,`${a.response.data.message}`)}),await h(),i.value=1};return T(()=>{S()}),(o,l)=>{const a=b("myLoading"),m=b("font-awesome-icon");return _(),p(w,null,[g(a,{active:r.value},null,8,["active"]),e("div",G,[M,t.value?(_(),p("div",Q,[e("h4",R,n(t.value.title),1),e("div",U,[e("div",z,[e("img",{class:"img-fluid object-fit-cover w-100 mb-2",src:t.value.imageUrl,alt:"",style:{"max-height":"400px"},"data-aos":"zoom-in"},null,8,A)]),e("div",H,[e("div",null,[e("span",J,n(t.value.category),1)]),e("p",null,"尺寸/包裝："+n(t.value.description),1),e("p",null,"商品資訊："+n(t.value.content),1),e("div",K,"售價：NT$ "+n(t.value.price)+" 元",1),e("del",O,"原價：NT$ "+n(t.value.origin_price)+" 元",1),e("div",W,[e("div",X,[y(e("select",{class:"form-select",id:"inputGroupSelect02","onUpdate:modelValue":l[0]||(l[0]=s=>i.value=s),disabled:c.value},[Z,(_(),p(w,null,j(10,(s,k)=>e("option",{value:s,key:k},n(s),9,ee)),64))],8,Y),[[L,i.value]]),e("button",{disabled:c.value,type:"button",class:"btn btn-outline-secondary",onClick:l[1]||(l[1]=s=>N())},[y(g(m,{icon:"spinner",class:"fa-spin"},null,512),[[q,c.value]]),B(" 加入購物車 ")],8,te)])])])])])):I("",!0)])],64)}}};export{ne as default};
