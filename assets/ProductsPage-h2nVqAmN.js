import{_ as P,I as k,u as B,r,d as x,i as p,o as g,c as v,f,a,J as l,F as h,l as w,m as L,j as D}from"./index-7sQXWFie.js";import{P as T}from"./ProductCard-OAnEvioy.js";import{B as E}from"./BottomPagination-6omV3C6J.js";import{a as N}from"./axios-1ZJK7IKQ.js";import"./cart-K2y4INPi.js";const V={components:{ProductCard:T,BottomPagination:E},setup(){const u=k(),e=B(),d=r({}),t=r({}),y=r({}),_=r(null),i=r(!1),s=r(u.query.category?u.query.category:"全部"),m=n=>{s.value=n,n==="全部"?o(1):o(1,s.value),e.push(`/products?category=${n}`)},o=(n,C)=>{i.value=!0,N.getProducts(n,C).then(c=>{d.value=[...c.data.products],t.value={...c.data.pagination},window.scroll(0,0),i.value=!1}).catch(c=>{console.log(c),i.value=!1})},b=n=>{e.push(`/product/${n.id}`)};return x(()=>{s.value==="全部"?o(1):o(1,s.value)}),{modal:_,tempProduct:y,pages:t,products:d,category:s,changeCategory:m,getProducts:o,goToDetail:b,isLoading:i}}},j={class:"container"},q={class:"row"},F={class:"col-md-3"},G={class:"list-group text-center side-menu"},R=a("li",{class:"list-group-item bg-light h4 mb-0 text-dark fw-bold"}," 甜點列表 ",-1),z={class:"col-md-9"},I={class:"row"},J={class:"d-flex justify-content-center"};function M(u,e,d,t,y,_){const i=p("myLoading"),s=p("ProductCard"),m=p("BottomPagination");return g(),v(h,null,[f(i,{active:t.isLoading},null,8,["active"]),a("div",j,[a("div",q,[a("div",F,[a("ul",G,[R,a("button",{type:"button",onClick:e[0]||(e[0]=o=>t.changeCategory("全部")),class:l(["list-group-item list-group-item-action list-group-item-light h4 mb-0",{active:t.category==="全部"}])},"所有甜點",2),a("button",{type:"button",onClick:e[1]||(e[1]=o=>t.changeCategory("蛋糕")),class:l(["list-group-item list-group-item-action list-group-item-light h4 mb-0",{active:t.category==="蛋糕"}])},"特色蛋糕",2),a("button",{type:"button",onClick:e[2]||(e[2]=o=>t.changeCategory("泡芙")),class:l(["list-group-item list-group-item-action list-group-item-light h4 mb-0",{active:t.category==="泡芙"}])},"閃電泡芙",2),a("button",{type:"button",onClick:e[3]||(e[3]=o=>t.changeCategory("千層酥")),class:l(["list-group-item list-group-item-action list-group-item-light h4 mb-0",{active:t.category==="千層酥"}])},"酥脆千層",2),a("button",{type:"button",onClick:e[4]||(e[4]=o=>t.changeCategory("馬卡龍")),class:l(["list-group-item list-group-item-action list-group-item-light h4 mb-0",{active:t.category==="馬卡龍"}])}," 經典馬卡龍",2)])]),a("div",z,[a("div",I,[(g(!0),v(h,null,w(t.products,o=>(g(),v("div",{class:"col-md-4 mb-5 mt-1",key:o.id},[o.is_enabled?(g(),L(s,{key:0,product:o,onGoToDetail:t.goToDetail,"data-aos":"flip-left"},null,8,["product","onGoToDetail"])):D("",!0)]))),128))]),a("div",J,[f(m,{onEmitPage:t.getProducts,pages:t.pages},null,8,["onEmitPage","pages"])])])])])],64)}const S=P(V,[["render",M]]);export{S as default};
